!function(e){function t(t){for(var r,i,c=t[0],l=t[1],u=t[2],s=0,f=[];s<c.length;s++)i=c[s],o[i]&&f.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(p&&p(t);f.length;)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={1:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="dist/";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=l;a.push([79,0]),n()}({22:function(e,t,n){e.exports={active:"active__6cc4b3e",myItem:"myItem__d3d4b53"}},32:function(e,t,n){e.exports={box:"box__9f3543b",item:"item__4c42bd8"}},45:function(e,t,n){e.exports={input:"input__569093f"}},51:function(e,t,n){e.exports={col:"col__bb9b535"}},79:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"all",function(){return yt});var o={};n.r(o),n.d(o,"load",function(){return bt}),n.d(o,"add",function(){return mt}),n.d(o,"remove",function(){return dt}),n.d(o,"changeCnt",function(){return ht}),n.d(o,"clean",function(){return vt});var a=n(0),i=n.n(a),c=n(13),l=n.n(c),u=n(22),p=n.n(u),s=n(11),f=function(e){return Object(s.b)("stores")(Object(s.c)(e))},y=n(16),b=n(8),m=n(6),d=n.n(m);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=O(this,(e=w(t)).call.apply(e,[this].concat(o)))).nativeInput=i.a.createRef(),n.checkChange=function(e){n.props.value.toString()!==e.target.value&&n.props.onChange(e)},n.checkEnterKey=function(e){13===e.keyCode&&n.checkChange(e)},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidUpdate",value:function(e,t){var n=this.nativeInput.current;e.value!==this.props.value&&this.props.value!=n.value&&(n.value=this.props.value)}},{key:"setValue",value:function(e){this.nativeInput.current.value=e}},{key:"render",value:function(){return i.a.createElement("input",v({},this.props.nativeProps,{defaultValue:this.props.value,onBlur:this.checkChange,onKeyUp:this.checkEnterKey,ref:this.nativeInput}))}}])&&g(n.prototype,r),o&&g(n,o),t}();j.defaultProps={onChange:function(e){},nativeProps:{}},j.propTypes={value:d.a.any.isRequired,onChange:d.a.func,nativeProps:d.a.object};var P=n(45),k=n.n(P);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=S(this,(e=x(t)).call.apply(e,[this].concat(o)))).lazyInput=i.a.createRef(),n.increase=function(){n.set(n.props.cnt+1)},n.decrease=function(){n.set(n.props.cnt-1)},n.onChange=function(e){var t=parseInt(e.target.value),r=n.set(isNaN(t)?n.props.min:t);r.toString()!==e.target.value&&n.lazyInput.current.setValue(r)},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"set",value:function(e){var t=Math.min(Math.max(e,this.props.min),this.props.max);return this.props.onChange(t),t}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("button",{onClick:this.decrease,disabled:this.props.disabled||this.props.cnt<=this.props.min},"-"),i.a.createElement(j,{nativeProps:{type:"text",className:k.a.input,disabled:this.props.disabled},value:this.props.cnt,onChange:this.onChange,ref:this.lazyInput}),i.a.createElement("button",{onClick:this.increase,disabled:this.props.disabled||this.props.cnt>=this.props.max},"+"))}}])&&C(n.prototype,r),o&&C(n,o),t}();function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}z.defaultProps={onChange:function(e){}},z.propTypes={min:d.a.number.isRequired,max:d.a.number.isRequired,cnt:d.a.number.isRequired,onChange:d.a.func,disabled:d.a.bool};var N=Object(y.f)(function(e){var t=e.history,n=(e.location,e.match,e.staticContext,e.to),r=I(e,["history","location","match","staticContext","to"]);return i.a.createElement("button",D({},r,{onClick:function(e){return t.push(n)}}))});function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q,U,H,G=f(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,B(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.cart,t=e.productsDetailed.map(function(t,n){return i.a.createElement("tr",{key:t.id},i.a.createElement("td",null,t.title),i.a.createElement("td",null,t.price),i.a.createElement("td",null,i.a.createElement(z,{min:1,max:t.rest,cnt:t.cnt,onChange:function(n){return e.change(t.id,n)},disabled:t.id in e.processId})),i.a.createElement("td",null,t.price*t.cnt),i.a.createElement("td",null,i.a.createElement("button",{onClick:function(){return e.remove(t.id)},disabled:t.id in e.processId},"X")))});return i.a.createElement("div",null,i.a.createElement("h2",null,"Cart"),i.a.createElement("table",{className:"table table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Title"),i.a.createElement("td",null,"Price"),i.a.createElement("td",null,"Count"),i.a.createElement("td",null,"Total"),i.a.createElement("td",null,"Actions"))),i.a.createElement("tbody",null,t)),i.a.createElement("h3",null,"Total: ",e.total),i.a.createElement("hr",null),i.a.createElement(b.b,{to:ze.order,className:"btn btn-primary"},"Send")," ",i.a.createElement(N,{to:ze.order,className:"btn btn-primary"},"Send"))}}])&&M(n.prototype,r),o&&M(n,o),t}()),K=n(82),$=n(83),F=n(81),J=n(2);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var W,Y=(U=Q((q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,"products",U,this),X(this,"processId",H,this),this.rootStore=t,this.api=this.rootStore.api.cart,this.storage=this.rootStore.storage,this.token=this.storage.getItem("cartToken")}var t,n,r;return t=e,(n=[{key:"load",value:function(){var e=this;this.api.load(this.token).then(function(t){Object(J.m)(function(){e.products=t.cart,t.needUpdate&&(e.token=t.token,e.storage.setItem("cartToken",e.token))})}).catch(function(){})}},{key:"add",value:function(e){var t=this;this.inCart(e)||e in this.processId||(this.processId[e]=!0,this.api.add(this.token,e).then(function(n){n&&t.products.push({id:e,cnt:1})}).catch(function(){t.rootStore.notifications.add("Can`t add item in cart! Try again!")}).finally(function(){delete t.processId[e]}))}},{key:"change",value:function(e,t){var n=this;if(!(e in this.processId)){var r=this.products.findIndex(function(t){return t.id===e});-1!==r&&(this.processId[e]=!0,this.api.changeCnt(this.token,e,t).then(function(o){n.products[r].cnt=t,delete n.processId[e]}))}}},{key:"remove",value:function(e){var t=this;if(this.inCart(e)&&!(e in this.processId)){var n=this.products.findIndex(function(t){return t.id===e});-1!==n&&(this.processId[e]=!0,this.api.remove(this.token,e).then(function(r){t.products.splice(n,1),delete t.processId[e]}))}}},{key:"clean",value:function(){var e=this;return new Promise(function(t,n){e.api.clean(e.token).then(function(r){r?(e.products=[],t()):n()})})}},{key:"productsDetailed",get:function(){var e=this;return this.products.map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){L(e,t,n[t])})}return e}({},e.rootStore.products.getById(t.id),{cnt:t.cnt})})}},{key:"inCart",get:function(){var e=this;return function(t){return e.products.some(function(e){return e.id===t})}}},{key:"cartCnt",get:function(){return this.products.length}},{key:"total",get:function(){return this.productsDetailed.reduce(function(e,t){return e+t.price*t.cnt},0)}}])&&Z(t.prototype,n),r&&Z(t,r),e}()).prototype,"products",[J.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=Q(q.prototype,"processId",[J.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Q(q.prototype,"productsDetailed",[J.e],Object.getOwnPropertyDescriptor(q.prototype,"productsDetailed"),q.prototype),Q(q.prototype,"inCart",[J.e],Object.getOwnPropertyDescriptor(q.prototype,"inCart"),q.prototype),Q(q.prototype,"cartCnt",[J.e],Object.getOwnPropertyDescriptor(q.prototype,"cartCnt"),q.prototype),Q(q.prototype,"total",[J.e],Object.getOwnPropertyDescriptor(q.prototype,"total"),q.prototype),Q(q.prototype,"load",[J.d],Object.getOwnPropertyDescriptor(q.prototype,"load"),q.prototype),Q(q.prototype,"add",[J.d],Object.getOwnPropertyDescriptor(q.prototype,"add"),q.prototype),Q(q.prototype,"change",[J.d],Object.getOwnPropertyDescriptor(q.prototype,"change"),q.prototype),Q(q.prototype,"remove",[J.d],Object.getOwnPropertyDescriptor(q.prototype,"remove"),q.prototype),Q(q.prototype,"clean",[J.d],Object.getOwnPropertyDescriptor(q.prototype,"clean"),q.prototype),q);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae=Object(s.b)("stores")(W=Object(s.c)(W=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=ne(this,(e=re(t)).call.apply(e,[this].concat(o)))).state={showModal:!1},n.show=function(){n.setState({showModal:!0})},n.hide=function(){n.setState({showModal:!1})},n.confirm=function(){n.props.stores.order.send().then(function(){n.hide(),n.props.history.push(ze.result)})},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.order,t=[],n=function(n){var r=e.formData[n];t.push(i.a.createElement(K.a.Group,{key:n,controlId:"order-form-"+n},i.a.createElement(K.a.Label,null,r.label),i.a.createElement(K.a.Control,{type:"text",value:r.value,onChange:function(t){return e.change(n,t.target.value)}}),null===r.valid||r.valid?"":i.a.createElement(K.a.Text,{className:"text-muted"},r.errorText)))};for(var r in e.formData)n(r);return i.a.createElement("div",null,i.a.createElement("h2",null,"Order"),i.a.createElement("hr",null),i.a.createElement(K.a,null,t),i.a.createElement(b.b,{className:"btn btn-warning",to:ze.home},"Back to cart")," ",i.a.createElement($.a,{variant:"primary",onClick:this.show,disabled:!e.formValid},"Apply order"),i.a.createElement(F.a,{show:this.state.showModal,backdrop:"static",onHide:this.hide},i.a.createElement(F.a.Header,{closeButton:!0},i.a.createElement(F.a.Title,null,"Check information")),i.a.createElement(F.a.Body,null,i.a.createElement("strong",null,"Total: ",Y.total)),i.a.createElement(F.a.Footer,null,i.a.createElement($.a,{variant:"secondary",onClick:this.hide},"Ooops"),i.a.createElement($.a,{variant:"primary",onClick:this.confirm},"All right"))))}}])&&te(n.prototype,r),o&&te(n,o),t}())||W)||W;function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se,fe=f(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,ue(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.order.lastOrderCache;return i.a.createElement("div",null,i.a.createElement("h2",null,"Congratulations!"),i.a.createElement("p",null,"Hi, ",e.name,"!"),i.a.createElement("p",null,i.a.createElement("strong",null,"Total: ",e.total)),i.a.createElement("div",null))}}])&&ce(n.prototype,r),o&&ce(n,o),t}()),ye=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Error 404, page not found"),i.a.createElement("hr",null),i.a.createElement("div",{className:"alert alert-warning"},i.a.createElement("p",null,i.a.createElement(b.b,{to:ze.home},"Go to home page"))))},be=n(84),me=n(51),de=n.n(me);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee,je=Object(s.b)("stores")(se=Object(s.c)(se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ge(this,Oe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.products,t=this.props.stores.cart,n=e.items.map(function(e){var n;return n=t.inCart(e.id)?i.a.createElement($.a,{variant:"danger",onClick:function(){return t.remove(e.id)},disabled:e.id in t.processId},"Remove from cart"):i.a.createElement($.a,{variant:"success",onClick:function(){return t.add(e.id)},disabled:e.id in t.processId},"Add to cart"),i.a.createElement("div",{className:"col col-4 "+de.a.col,key:e.id},i.a.createElement(be.a,null,i.a.createElement(be.a.Body,null,i.a.createElement(be.a.Title,null,e.title),i.a.createElement(be.a.Text,null,i.a.createElement("strong",null,"Price: ",e.price)),i.a.createElement(b.b,{to:De("product",{id:e.id})},"Get more..."),i.a.createElement("hr",null),n)))});return i.a.createElement("div",null,i.a.createElement("h1",null,"Products page"),i.a.createElement("div",{className:"row"},n))}}])&&ve(n.prototype,r),o&&ve(n,o),t}())||se)||se,Pe=function(e){var t;return t=e.inCart?i.a.createElement($.a,{variant:"danger",onClick:e.onRemove},"Remove from cart"):i.a.createElement($.a,{variant:"success",onClick:e.onAdd},"Add to cart"),i.a.createElement("div",null,i.a.createElement("h1",null,e.title),i.a.createElement("hr",null),i.a.createElement("div",null,i.a.createElement("strong",null,"Price: ",e.price)),i.a.createElement(e.linkComponent,{to:e.backUrl},"Back to list"),i.a.createElement("p",null,"Text about product"),t)};function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=[{name:"home",url:"/",component:je,exact:!0},{name:"product",url:"/products/:id",component:Object(s.b)("stores")(Ee=Object(s.c)(Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ce(this,Se(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.match.params.id,t=this.props.stores.products.getById(e),n=this.props.stores.cart;return null===t?i.a.createElement(ye,null):i.a.createElement(Pe,{title:t.title,price:t.price,backUrl:ze.home,linkComponent:b.b,inCart:n.inCart(t.id),onAdd:function(){return n.add(t.id)},onRemove:function(){return n.remove(t.id)}})}}])&&_e(n.prototype,r),o&&_e(n,o),t}())||Ee)||Ee,exact:!0},{name:"cart",url:"/cart",component:G,exact:!0},{name:"order",url:"/order",component:ae,exact:!0},{name:"result",url:"/done",component:fe,exact:!0},{url:"**",component:function(){return i.a.createElement(ye,null)}}],ze={};Te.forEach(function(e){e.hasOwnProperty("name")&&(ze[e.name]=e.url)});var De=function(e,t){if(!ze.hasOwnProperty(e))return null;var n=ze[e];for(var r in t)n=n.replace(":"+r,t[r]);return n},Ie=Te,Ne=n(32),Re=n.n(Ne);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=f(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Be(this,Ve(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.notifications,t=e.list.map(function(t){return i.a.createElement("div",{key:t.id,className:Re.a.item,onDoubleClick:function(){e.remove(t.id)}},t.message)});return i.a.createElement("div",{className:Re.a.box},t)}}])&&Ae(n.prototype,r),o&&Ae(n,o),t}());function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je,Le,Xe=f(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ke(this,$e(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.cart,t=Ie.map(function(e){return i.a.createElement(y.a,{path:e.url,component:e.component,exact:e.exact,key:e.url})});return i.a.createElement(b.a,null,i.a.createElement(Ue,null),i.a.createElement("header",null,i.a.createElement("div",{className:"container"},i.a.createElement("hr",null),i.a.createElement("div",{className:"row justify-content-between"},i.a.createElement("div",{className:"col col-4"},i.a.createElement("div",{className:"alert alert-success"},"Site name")),i.a.createElement("div",{className:"col col-3"},i.a.createElement("strong",null,"In Cart: ",e.cartCnt,i.a.createElement("br",null),"Total: ",e.total))),i.a.createElement("hr",null))),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col col-3"},i.a.createElement("ul",{className:"list-group"},i.a.createElement("li",{className:"list-group-item ".concat(p.a.myItem)},i.a.createElement(b.c,{to:ze.home,exact:!0,activeClassName:p.a.active},"Home")),i.a.createElement("li",{className:"list-group-item"},i.a.createElement(b.c,{to:ze.cart,activeClassName:p.a.active},"Cart")),i.a.createElement("li",{className:"list-group-item"},i.a.createElement(b.c,{to:ze.order,activeClassName:p.a.active},"Order now")))),i.a.createElement("div",{className:"col col-9"},i.a.createElement(y.c,null,t)))))}}])&&Ge(n.prototype,r),o&&Ge(n,o),t}());n(78);function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var We,Ye,et,tt=(Le=Qe((Je=function(){function e(t){var n,r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="items",a=this,(o=Le)&&Object.defineProperty(n,r,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.rootStore=t,this.api=this.rootStore.api.products}var t,n,r;return t=e,(n=[{key:"load",value:function(){var e=this;return new Promise(function(t,n){e.api.all().then(function(n){e.items=n,t(!0)})})}},{key:"getById",value:function(e){var t=this.productsMap[e];return void 0===t?null:this.items[t]}},{key:"productsMap",get:function(){var e={};return this.items.forEach(function(t,n){e[t.id.toString()]=n}),e}}])&&Ze(t.prototype,n),r&&Ze(t,r),e}()).prototype,"items",[J.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qe(Je.prototype,"productsMap",[J.e],Object.getOwnPropertyDescriptor(Je.prototype,"productsMap"),Je.prototype),Qe(Je.prototype,"load",[J.d],Object.getOwnPropertyDescriptor(Je.prototype,"load"),Je.prototype),Je);function nt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var at,it,ct=(Ye=ot((We=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),nt(this,"formData",Ye,this),nt(this,"lastOrderCache",et,this),this.rootStore=t}var t,n,r;return t=e,(n=[{key:"change",value:function(e,t){var n=this.formData[e];n.value=t,n.valid=n.validator(n.value)}},{key:"send",value:function(){var e=this;return new Promise(function(t,n){e.rootStore.cart.clean().then(function(){for(var n in e.lastOrderCache.total=e.rootStore.cart.total,e.formData)e.lastOrderCache[n]=e.formData[n].value,e.formData[n].value="";t()})})}},{key:"formValid",get:function(){return Object.values(this.formData).every(function(e){return e.valid})}},{key:"data",get:function(){var e={};for(var t in this.formData)e[t]=this.formData[t].value;return e}}])&&rt(t.prototype,n),r&&rt(t,r),e}()).prototype,"formData",[J.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:{value:"",label:"Name",validator:function(e){return/^[aA-zZ ]{2,}$/.test(e)},errorText:"Латинские символы, не менее двух",valid:null},phone:{value:"",label:"Phone",validator:function(e){return/^[0-9]{7,15}$/.test(e)},errorText:"От 7 до 15 цифр",valid:null},email:{value:"",label:"Email",validator:function(e){return/^.+@.+$/.test(e)},errorText:"Собака",valid:null}}}}),et=ot(We.prototype,"lastOrderCache",[J.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:"",email:"",phone:"",total:""}}}),ot(We.prototype,"formValid",[J.e],Object.getOwnPropertyDescriptor(We.prototype,"formValid"),We.prototype),ot(We.prototype,"data",[J.e],Object.getOwnPropertyDescriptor(We.prototype,"data"),We.prototype),ot(We.prototype,"change",[J.d],Object.getOwnPropertyDescriptor(We.prototype,"change"),We.prototype),ot(We.prototype,"send",[J.d],Object.getOwnPropertyDescriptor(We.prototype,"send"),We.prototype),We);function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var pt=(it=ut((at=function(){function e(t){var n,r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="notifications",a=this,(o=it)&&Object.defineProperty(n,r,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this._ai=0,this.rootStore=t}var t,n,r;return t=e,(n=[{key:"add",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;if(this.notifications[++this._ai]={id:this._ai,message:e,type:n},null!==r){var o=this._ai;setTimeout(function(){t.remove(o)},r)}}},{key:"remove",value:function(e){e in this.notifications&&delete this.notifications[e]}},{key:"list",get:function(){return Object.values(this.notifications)}}])&&lt(t.prototype,n),r&&lt(t,r),e}()).prototype,"notifications",[J.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ut(at.prototype,"list",[J.e],Object.getOwnPropertyDescriptor(at.prototype,"list"),at.prototype),ut(at.prototype,"add",[J.d],Object.getOwnPropertyDescriptor(at.prototype,"add"),at.prototype),ut(at.prototype,"remove",[J.d],Object.getOwnPropertyDescriptor(at.prototype,"remove"),at.prototype),at),st="/reactcourseapi/";function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st;return fetch(n+e,t).then(function(e){return 200!==e.status?e.text().then(function(e){throw new Error(e)}):e.json()})}function yt(){return ft("products/all.php")}function bt(e){var t="cart/load.php";return null!==e&&(t+="?token=".concat(e)),ft(t)}function mt(e,t){return ft("cart/add.php?token=".concat(e,"&id=").concat(t))}function dt(e,t){return ft("cart/remove.php?token=".concat(e,"&id=").concat(t))}function ht(e,t,n){return ft("cart/change.php?token=".concat(e,"&id=").concat(t,"&cnt=").concat(n))}function vt(e){return ft("cart/clean.php?token=".concat(e))}var gt=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api={products:r,cart:o},this.storage=localStorage,this.cart=new Y(this),this.products=new tt(this),this.order=new ct(this),this.notifications=new pt(this)};gt.products.load().then(function(){l.a.render(i.a.createElement(s.a,{stores:gt},i.a.createElement(Xe,null)),document.querySelector("#app"))}),gt.cart.load()}});